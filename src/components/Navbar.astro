---
// src/components/Navbar.astro
const { currentPage } = Astro.props;
---
<!-- Header fijo en m칩vil -->
<header class="fixed md:hidden top-0 left-0 right-0 bg-white border-b border-slate-200 z-50 flex items-center justify-between p-4">
  <a href="/" class="text-2xl font-bold text-gray-800">
    游냥
  </a>
  <button id="menu-button" class="p-2 rounded-lg hover:bg-slate-100">
    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
    </svg>
  </button>
</header>

<!-- Sidebar - Solo en desktop, o modal en m칩vil -->
<aside id="navbar" class="bg-white border-r border-slate-200 flex flex-col fixed md:relative w-56 md:w-auto h-screen md:h-auto z-40 md:z-auto transform -translate-x-full md:translate-x-0 transition-transform duration-300 top-0 md:top-auto left-0 md:max-w-xs">
  <div class="flex items-center justify-between p-4 border-b border-slate-200 md:hidden">
    <a href="/" class="text-xl font-bold text-gray-800">
      游냥 <span class="font-bold">App</span>
    </a>
    <button id="close-button" class="p-2 rounded-lg hover:bg-slate-100">
      <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <div class="hidden md:flex items-center p-4 border-b border-slate-200">
    <a href="/" class="text-lg font-bold text-gray-800 whitespace-nowrap">
      游냥 Chicharron
    </a>
  </div>

  <nav class="flex-grow p-4 overflow-y-auto">
    <ul class="space-y-2">
      <li>
        <a href="/" class:list={[
          "flex items-center space-x-3 p-3 rounded-lg transition-all whitespace-nowrap",
          currentPage === 'a침adir' 
            ? "bg-blue-500 text-white font-bold shadow-md" 
            : "text-gray-600 hover:bg-slate-100"
        ]}>
          <span>游닇</span>
          <span>A침adir Pedido</span>
        </a>
      </li>

      <li>
        <a href="/lista" class:list={[
          "flex items-center space-x-3 p-3 rounded-lg transition-all whitespace-nowrap",
          currentPage === 'lista' 
            ? "bg-blue-500 text-white font-bold shadow-md" 
            : "text-gray-600 hover:bg-slate-100"
        ]}>
          <span>游늶</span>
          <span>Lista de Pedidos</span>
        </a>
      </li>

      <li>
        <a href="/reportes" class:list={[
          "flex items-center space-x-3 p-3 rounded-lg transition-all whitespace-nowrap",
          currentPage === 'reportes' 
            ? "bg-blue-500 text-white font-bold shadow-md" 
            : "text-gray-600 hover:bg-slate-100"
        ]}>
          <span>游늵</span>
          <span>Reportes</span>
        </a>
      </li>
    </ul>
  </nav>
</aside>

<!-- Overlay para cerrar men칰 en m칩vil -->
<div id="menu-overlay" class="hidden fixed inset-0 bg-black/30 md:hidden z-30"></div>

<script>
  const menuButton = document.getElementById('menu-button');
  const closeButton = document.getElementById('close-button');
  const navbar = document.getElementById('navbar');
  const menuOverlay = document.getElementById('menu-overlay');
  const navLinks = document.querySelectorAll('#navbar a');

  function closeMenu() {
    navbar?.classList.add('-translate-x-full');
    navbar?.classList.remove('translate-x-0');
    menuOverlay?.classList.add('hidden');
    menuOverlay?.classList.remove('block');
  }

  function openMenu() {
    navbar?.classList.remove('-translate-x-full');
    navbar?.classList.add('translate-x-0');
    menuOverlay?.classList.remove('hidden');
    menuOverlay?.classList.add('block');
  }

  menuButton?.addEventListener('click', openMenu);
  closeButton?.addEventListener('click', closeMenu);
  menuOverlay?.addEventListener('click', closeMenu);

  // Cerrar men칰 al hacer click en un enlace
  navLinks.forEach(link => {
    link.addEventListener('click', closeMenu);
  });

  // Cerrar men칰 al cambiar el tama침o de la ventana a desktop
  window.addEventListener('resize', () => {
    if (window.innerWidth >= 768) {
      closeMenu();
    }
  });
</script>